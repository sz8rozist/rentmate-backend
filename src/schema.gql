# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type PublicUser {
  id: Int!
  email: String!
  name: String!
  role: UserRole!
  flatId: Int
}

enum UserRole {
  landlord
  tenant
}

type FileUploadResponse {
  key: String!
  url: String!
}

type UploadFilesResponse {
  files: [FileUploadResponse!]!
}

type Message {
  id: ID!
  flatId: Float!
  senderId: Float!
  content: String!
  createdAt: DateTime!
  imageUrls: JSON
  flat: Flat!
  sender: User!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type User {
  id: ID!
  email: String!
  name: String!
  role: UserRole!
  flatId: Int
  password: String!
  ownedFlats: [Flat!]!
  messages: [Message!]!
  flat: Flat
}

type FlatImage {
  id: ID!
  url: String!
  filename: String!
  flatId: Int!
  flat: Flat!
}

type Flat {
  id: ID!
  address: String!
  price: Int!
  status: FlatStatus!
  landlordId: Int!
  landlord: User!
  images: [FlatImage!]
  messages: [Message!]!
  tenants: [User!]!
}

enum FlatStatus {
  available
  rented
}

type DocumentModel {
  id: ID!
  name: String!
  url: String!
  type: String!
  category: String!
  filePath: String!
  flatId: Float!
  uploadedAt: DateTime!
}

type Query {
  tenants(input: TenantRequest): [PublicUser!]!

  """Get a flat by its ID"""
  flatById(id: Int!): Flat
  getFlatForTenant(tenantId: Int!): Flat
  getFlatsForLandlord(landlordId: Int!): [Flat!]!
  messages(flatId: Int!): [Message!]!
  documents(flatId: Float!): [DocumentModel!]!
}

input TenantRequest {
  name: String
}

type Mutation {
  login(email: String!, password: String!): String!
  register(data: RegisterInput!): PublicUser!
  uploadFiles(input: UploadFilesInput!): UploadFilesResponse!
  addFlat(data: FlatRequestInput!): Flat!
  uploadFlatImage(flatId: Int!, image: Upload!): Boolean!
  deleteFlatImage(imageId: Int!): Boolean!
  updateFlat(flatId: Int!, data: FlatRequestInput!): Flat!
  deleteFlat(flatId: Int!): Boolean!
  addTenantToFlat(flatId: Int!, tenantId: Int!): Boolean!
  removeTenantFromFlat(tenantId: Int!): Boolean!
  createMessageWithFiles(input: CreateMessageInput!, files: [Upload!]): Message!
  uploadDocument(file: Upload!, data: CreateDocumentInput!): DocumentModel!
  deleteDocument(id: Float!): Boolean!
}

input RegisterInput {
  email: String!
  name: String!
  password: String!
  role: UserRole!
}

input UploadFilesInput {
  """Fájlok feltöltése"""
  files: [Upload!]!
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

input FlatRequestInput {
  address: String!
  price: Int!
  landlordId: Int!
}

input CreateMessageInput {
  flatId: Int!
  senderId: Int!
  content: String!
  imageUrls: JSON
}

input CreateDocumentInput {
  originalName: String!
  category: String!
  flatId: Float!
}

type Subscription {
  messageAdded(flatId: Int!): Message!
}