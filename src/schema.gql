# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type PublicUser {
  id: Int!
  email: String!
  name: String!
  role: UserRole!
  flatId: Int
}

enum UserRole {
  landlord
  tenant
}

type SignedUrlResponse {
  urls: [String!]!
}

type FileUploadResponse {
  key: String!
  url: String!
}

type UploadFilesResponse {
  files: [FileUploadResponse!]!
}

type MessageAttachment {
  id: ID!
  url: Float
  filename: String!
  messageId: Float!
  messages: Message!
}

type Message {
  id: ID!
  flatId: Float!
  senderId: Float!
  content: String!
  createdAt: DateTime!
  flat: Flat!
  sender: User!
  messageAttachments: [MessageAttachment!]!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type User {
  id: ID!
  email: String!
  name: String!
  role: UserRole!
  flatId: Int
  password: String!
  ownedFlats: [Flat!]!
  messages: [Message!]!
  flat: Flat
}

type FlatImage {
  id: ID!
  filename: String!
  flatId: Int!
  flat: Flat!
  url: String
}

type Flat {
  id: ID!
  address: String!
  price: Int!
  status: FlatStatus!
  landlordId: Int!
  landlord: User!
  images: [FlatImage!]
  messages: [Message!]!
  tenants: [User!]!
}

enum FlatStatus {
  available
  rented
}

type DocumentModel {
  id: ID!
  name: String!
  url: String!
  type: String!
  category: String!
  filePath: String!
  flatId: Float!
  uploadedAt: DateTime!
}

type Query {
  tenants(input: TenantRequest): [PublicUser!]!
  getSignedUrlsToFile(input: SignedUrlsRequest!): SignedUrlResponse!

  """Get a flat by its ID"""
  flatById(id: Int!): Flat
  getFlatForTenant(tenantId: Int!): Flat
  getFlatsForLandlord(landlordId: Int!): [Flat!]!
  documents(flatId: Float!): [DocumentModel!]!
}

input TenantRequest {
  name: String
}

input SignedUrlsRequest {
  """Fájl kulcsok listája"""
  keys: [String!]!
}

type Mutation {
  login(email: String!, password: String!): String!
  register(data: RegisterInput!): PublicUser!
  uploadFiles(input: UploadFilesInput!): UploadFilesResponse!
  addFlat(data: FlatRequestInput!): Flat!
  uploadFlatImage(flatId: Int!, image: Upload!): Boolean!
  deleteFlatImage(imageId: Int!): Boolean!
  updateFlat(flatId: Int!, data: FlatUpdateInput!): Flat!
  deleteFlat(flatId: Int!): Boolean!
  uploadAttachment(messageId: Int!, file: Upload!): Boolean!
  uploadDocument(file: Upload!, data: CreateDocumentInput!): DocumentModel!
  deleteDocument(id: Float!): Boolean!
}

input RegisterInput {
  email: String!
  name: String!
  password: String!
  role: UserRole!
}

input UploadFilesInput {
  """Fájlok feltöltése"""
  files: [Upload!]!
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

input FlatRequestInput {
  address: String!
  price: Int!
  landlordId: Int!
}

input FlatUpdateInput {
  address: String!
  price: Int!
  status: FlatStatus!
}

input CreateDocumentInput {
  originalName: String!
  category: String!
  flatId: Float!
}